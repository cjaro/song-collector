<!-- start full screen container -->

<div class="col-sm-12" id="songInfoContainer">


<form name="nsc.newSongForm" confirm-on-exit>
  <div class="col-sm-12 panel text-right" id="toolbar">
    <div class="form-group">
      <div class="col-sm-8 half-gutter text-center">
        <input ng-class="['form-control', nsc.songError ? 'songErrorHighlight': '']" id="songTitle" ng-model="nsc.newSongObject.title" placeholder="{{nsc.titlePlaceholder}}" />
      </div>
    </div>
    <button type="submit" class="btn btn-primary" title="Save this song"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true" ng-click="nsc.saveCatches(nsc.newSongObject)"></span></button>
    <button type="button" class="btn btn-primary" popover-placement="bottom-right" uib-popover-template="nsc.cancelPopover.templateUrl" popover-title="{{nsc.cancelPopover.title}}" title="Do not save this song"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
  </div>

  <!-- start Cancel popover template -->
  <script type="text/ng-template" id="cancelPopover.html">
    <center>
    <p class="text-center">{{nsc.cancelPopover.content}}</p>
    <form>
      <button class="btn btn-danger" ng-click="nsc.redirectToCollection()" type="submit"><strong>Cancel!</strong></button>
    </form>
    </center>
  </script>
  <!-- end Cancel popover template -->

  <!-- start div for right column -->
  <div class="col-sm-8 card-holder">

    <form class="form-horizontal">
      {{nsc.newSongForm.$dirty}}
      <div class="form-group">
        <label for="toneSet" class="col-sm-4 control-label no-gutter">Tone Set</label>
        <div class="col-sm-8 half-gutter">
          <!-- <div contenteditable class="form-control" id="toneSet"> -->
          <ng-quill-editor id="toneSet" theme="bubble" class="form-control" ng-model="nsc.newSongObject.toneSet" placeholder="Tone Set">
            <ng-quill-toolbar>
              <div id="ng-quill-toolbar">
                <span class="ql-formats">
                  <button class="ql-bold" ng-attr-title="{{'Bold'}}"></button>
                  <button class="ql-italic" ng-attr-title="{{'Italic'}}"></button>
                  <button class="ql-underline" ng-attr-title="{{'Underline'}}"></button>
                </span>
              </div>
            </ng-quill-toolbar>
          </ng-quill-editor>
          <!-- </div> -->
        </div>
      </div>
      <div class="form-group">
        <label for="scaleMode" class="col-sm-4 control-label no-gutter">Scale / Mode</label>
        <div class="col-sm-8 half-gutter">
          <select name="scaleMode" ng-model="nsc.newSongObject.scaleMode" class="form-control" placeholder="Scale / Mode" ng-options="scaleMode.id as scaleMode.scale_mode for scaleMode in nsc.dropdowns.scaleMode track by scaleMode.id">
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="teachableElements" class="col-sm-4 control-label no-gutter">Teachable Elements</label>
        <div class="col-sm-8 half-gutter">
          <div name="teachableElements" ng-dropdown-multiselect="" options="nsc.dropdowns.teachableElements" selected-model="nsc.newSongObject.teachableElementsModel" extra-settings="nsc.teachableElementsSettings" translation-texts="nsc.teachableElementsCustomTexts"></div>
        </div>
        <!-- {{nsc.newSongObject}} -->
      </div>
      <div class="form-group">
        <label for="rhythm" class="col-sm-4 control-label no-gutter">Rhythm</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.rhythm" placeholder="Rhythm" ng-change="nsc.checkAndDisplayRhythm(nsc.newSongObject.rhythm)">
        </div>
        <div class="display">
          <span ng-repeat="component in nsc.rhythm track by $index">
            <span ng-class="{'music-font': $index % 2==0}">{{component}}</span>
          </span>
        </div>
      </div>
      <div class="form-group">
        <label for="extractableRhythms" class="col-sm-4 control-label no-gutter">Extractable Rhythms</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.extractableRhythms" placeholder="Extractable Rhythms" ng-change="nsc.checkAndDisplayExtractableRhythms(nsc.newSongObject.extractableRhythms)">
        </div>
        <div class="display">
          <span ng-repeat="extract in nsc.extractableRhythms track by $index">
            <span ng-class="{'music-font': $index % 2==0}">{{extract}}</span>
          </span>
        </div>
      </div>
      <div cla
      <div class="form-group">
        <label for="extractableMelodies" class="col-sm-4 control-label no-gutter">Extractable Melodies</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.extractableMelodies" placeholder="Extractable Melodies">
        </div>
      </div>
      <div class="form-group">
        <label for="meter" class="col-sm-4 control-label no-gutter">Meter</label>
        <div class="col-sm-8 half-gutter">
          <select name="formType" ng-model="nsc.newSongObject.meter" class="form-control" placeholder="Meter" ng-options="meter.id as meter.meter for meter in nsc.dropdowns.meter">
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="intervalNoteGroup" class="col-sm-4 control-label no-gutter">Verses</label>
        <div class="col-sm-8 half-gutter">
          <textarea class="form-control" ng-model="nsc.newSongObject.verses" placeholder="Verses" rows="5"></textarea>
        </div>
      </div>
      <div class="form-group">
        <label for="intervalNoteGroup" class="col-sm-4 control-label no-gutter">Formation</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.formation" placeholder="Formation" />
        </div>
      </div>
      <div class="form-group">
        <label for="intervalNoteGroup" class="col-sm-4 control-label no-gutter">Action</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.action" placeholder="Action" />
        </div>
      </div>
      <div class="form-group">
        <label for="intervalNoteGroup" class="col-sm-4 control-label no-gutter">Intervals / Note Group</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.intervalsNoteGroups" placeholder="Intervals / Note Group" />
        </div>
      </div>
      <div class="form-group">
        <label for="phrases" class="col-sm-4 control-label no-gutter">Phrases</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.phrases" placeholder="Phrases" />
        </div>
      </div>
      <div class="form-group">
        <label for="melodicForm" class="col-sm-4 control-label no-gutter">Melodic Form</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.melodicForm" placeholder="Melodic Form" />
        </div>
      </div>
      <div class="form-group">
        <label for="rhythmicForm" class="col-sm-4 control-label no-gutter">Rhythmic Form</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.rhythmicForm" placeholder="Rhythmic Form" />
        </div>
      </div>
      <div class="form-group">
        <label for="formType" class="col-sm-4 control-label no-gutter">Form Type</label>
        <div class="col-sm-8 half-gutter">
          <select name="formType" ng-model="nsc.newSongObject.formType" class="form-control" placeholder="Form Type" ng-options="formType.id as formType.form_type for formType in nsc.dropdowns.formType">
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="songType" class="col-sm-4 control-label no-gutter">Song Type</label>
        <div class="col-sm-8 half-gutter">
          <select name="formType" ng-model="nsc.newSongObject.songType" class="form-control" placeholder="Song Type" ng-options="songType.id as songType.song_type for songType in nsc.dropdowns.songType">
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="cultureOrigin" class="col-sm-4 control-label no-gutter">Culture / Origin</label>
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.cultureOrigin" placeholder="Culture / Origin" />
        </div>
      </div>
      <div class="form-group">
        <label for="language" class="col-sm-4 control-label no-gutter">Language</label>
        <div class="col-sm-8 half-gutter">
          <select name="language" ng-model="nsc.newSongObject.language" class="form-control" placeholder="Language" ng-options="language.id as language.language for language in nsc.dropdowns.language">
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="csp" class="col-sm-4 control-label no-gutter">CSP</label>
        <!-- comfortable starting pitch -->
        <div class="col-sm-8 half-gutter">
          <input class="form-control" ng-model="nsc.newSongObject.csp" placeholder="CSP" />
        </div>
      </div>
      <div class="form-group">
        <label for="other" class="col-sm-4 control-label no-gutter">Other</label>
        <div class="col-sm-8 half-gutter">
          <textarea class="form-control" ng-model="nsc.newSongObject.other" placeholder="Other Notes" rows="3"></textarea>
        </div>
      </div>
      <div class="form-group">
        <label for="source" class="col-sm-4 control-label no-gutter">Source</label>
        <div class="col-sm-8 half-gutter">
          <textarea class="form-control" ng-model="nsc.newSongObject.source" placeholder="Source Notes" rows="3"></textarea>
        </div>
      </div>
    </form>
  </div>


  <!-- attachments div -->
  <div class="col-sm-4">
    <!-- notation attachments -->
    <div class="form-group">
      <label for="notation" class="col-sm-12 control-label no-gutter">Music Notation</label>
      <div class="col-sm-12 half-gutter">
        <button class="btn btn-primary" ng-click="nsc.notationUpload(nsc.oneSong.details.id)">Upload</button>
        {{nsc.notationUploaded}}
        <div style="margin-top:10px;" ng-if="nsc.notationUploaded.list.length > 0">
          <!-- Show the thumbnail only when the picture is uploaded -->
          <!-- the picture is rendered with width: 500 and sharpened -->
          <img class="small" ng-click="nsc.viewMoreOnClick(true, 'notation', $index, true)" ng-src="{{nsc.notationUploaded.list[0].url}}">
          <!-- ^^^ will need to be an ng-repeat with multiple files ^^^ -->
        </div>
      </div>
    </div>
  </div>
  <!-- end div for other attachments -->
  <div class="col-sm-4">
    <div class="form-group">
      <label for="attachments" class="col-sm-12 control-label no-gutter">Attachments</label>
      <div class="col-sm-12 half-gutter">
        <button class="btn btn-primary" ng-click="nsc.fileUpload(nsc.oneSong.details.id)">Upload</button>
        <div style="margin-top:10px;" ng-if="nsc.filesUploaded.list.length > 0">
          <!-- Show the thumbnail only when the picture is uploaded -->
          <!-- the picture is rendered with width: 500 and sharpened -->
          <img class="small" ng-click="nsc.viewMoreOnClick(true, 'attachments', $index, true)" ng-src="{{nsc.filesUploaded.list[0].url}}">
          <!-- ^^^ will need to be an ng-repeat if we use multiple files ^^^ -->
        </div>
      </div>
    </div>
  </div>
  <!-- end div for other attachments -->

  <!-- begin modal code -->
  <div ng-if="nsc.viewMore" class="imageModule text-center" ng-click="nsc.viewMoreOnClick(false)">
    <img style="max-width:100%; max-height:100%;" ng-src="{{nsc.lightboxImage}}" />
  </div>
  <!-- end modal code -->

  </div>
  <!-- end attachements div -->
</form>
</div>
<!-- end full screen container -->
